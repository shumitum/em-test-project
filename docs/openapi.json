{"openapi":"3.0.1","info":{"title":"Task Management System API","description":"Documentation \"Task Management System API\" v1.0","version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Test Server"}],"security":[{"Bearer Authentication":[]}],"tags":[{"name":"КОММЕНТАРИИ","description":"API для работы с комментариями"},{"name":"ЗАДАЧИ","description":"API для работы с задачами"}],"paths":{"/tasks":{"post":{"tags":["ЗАДАЧИ"],"summary":"Создание задачи","description":"Создание задачи, пользователь МОЖЕТ создать задачу для самого себя, пользователь с ролью исполнитель не может поставить задачу пользователю с ролью менеджер.","operationId":"createTask","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTaskDto"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Задача создана","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewTaskDto"}}}}}}},"/comments":{"get":{"tags":["КОММЕНТАРИИ"],"summary":"Поиск комментариев к конкретной задаче","description":"Поиск комментариев к конкретной задаче (по ID задачи) и пагинацией возвращаемых данных. Если по запросу не найдено ни одного комментария, то возвращается пустой список ","operationId":"getCommentsByTaskId","parameters":[{"name":"taskId","in":"query","description":"ID задачи для которой запрашиваются комментарии","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"from","in":"query","description":"Количество элементов, которые нужно пропустить для формирования текущего набора","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","description":"количество элементов в наборе","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Комментарии найдены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewCommentDto"}}}}}},"post":{"tags":["КОММЕНТАРИИ"],"summary":"Создание комментария к задаче","description":"Все пользователи могут комментировать задачи друг друга","operationId":"createComment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCommentDto"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"201":{"description":"Комментарий создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewCommentDto"}}}}}}},"/tasks/{taskId}":{"get":{"tags":["ЗАДАЧИ"],"summary":"Получение задачи по ID","description":"Авторизованный пользователь может запросить задачу по ID","operationId":"getTaskById","parameters":[{"name":"taskId","in":"path","description":"ID запрашиваемой задачи","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Задача найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewTaskDto"}}}}}},"delete":{"tags":["ЗАДАЧИ"],"summary":"Удаление задачи","description":"Пользователь может удалить задачу если он является её автором, и задача находится в статусе создана или завершена.","operationId":"deleteTask","parameters":[{"name":"taskId","in":"path","description":"ID удаляемой задачи","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Задача удалена"}}},"patch":{"tags":["ЗАДАЧИ"],"summary":"Редактирование задачи","description":"Пользователь может отредактировать задачу если он является её владельцем, задача находится в статусе 'Создано', и не принята исполнителем в работу.","operationId":"updateTask","parameters":[{"name":"taskId","in":"path","description":"ID обновляемой задачи","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTaskDto"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Задача отредактирована","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewTaskDto"}}}}}}},"/tasks/{taskId}/status":{"patch":{"tags":["ЗАДАЧИ"],"summary":"Смена статуса задачи","description":"Пользователь может поменять статус задачи если он является её исполнителем, и задача не отменена автором. Исполнитель не может установить статус 'Создано' или 'Отменено'.","operationId":"updateTaskStatus","parameters":[{"name":"taskId","in":"path","description":"ID обновляемой задачи","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"status","in":"query","description":"Новый статус задачи","required":true,"schema":{"type":"string","enum":["CREATED","PENDING","IN_PROGRESS","COMPLETED","CANCELED"]}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Статус задачи изменён","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewTaskDto"}}}}}}},"/comments/{commentId}":{"delete":{"tags":["КОММЕНТАРИИ"],"summary":"Удаление комментария","description":"Пользователи могут удалять свои комментарии","operationId":"deleteComment","parameters":[{"name":"commentId","in":"path","description":"ID удаляемого комментария","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"204":{"description":"Задача удалена"}}},"patch":{"tags":["КОММЕНТАРИИ"],"summary":"Редактирование комментария","description":"Пользователи могут редактировать свои комментарии","operationId":"updateComment","parameters":[{"name":"commentId","in":"path","description":"ID редактируемого комментария","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCommentDto"}}},"required":true},"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Комментарий отредактирован","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewCommentDto"}}}}}}},"/tasks/search":{"get":{"tags":["ЗАДАЧИ"],"summary":"Поиск задач с возможностью фильтрации","description":"Поиск задач c фильтрацией результатов поиска по автору или исполнителю, по статусу задач (по умолчанию в выборку попадут задачи с любым приоритетом) и пагинацией возвращаемых данных. Если по запросу не найдено ни одного события, то возвращается пустой список","operationId":"getTaskByExecutorId","parameters":[{"name":"aore","in":"query","description":"Указатель поиска по автору или исполнителю","required":true,"schema":{"type":"string","enum":["AUTHOR","EXECUTOR"]}},{"name":"userId","in":"query","description":"ID автора или исполнителя задач","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"priority","in":"query","description":"Приоритет искомых задач","required":false,"schema":{"type":"string","enum":["HIGH","MEDIUM","LOW"]}},{"name":"from","in":"query","description":"Количество элементов, которые нужно пропустить для формирования текущего набора","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","description":"количество элементов в наборе","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"404":{"description":"Not Found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"400":{"description":"Запрос составлен некорректно","content":{}},"403":{"description":"Forbidden","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"200":{"description":"Задачи найдены","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ViewTaskDto"}}}}}}}},"components":{"schemas":{"ErrorResponse":{"type":"object","properties":{"message":{"type":"string","description":"Error message","example":"must not be blank. Value: null"},"status":{"type":"string","description":"Error status","example":"400 BAD_REQUEST"},"path":{"type":"string","example":"user/1/tasks"},"timestamp":{"type":"string","example":"2023-12-08 09:10:50"}},"description":"Описание ошибки"},"CreateTaskDto":{"required":["description","executorId","header","taskPriority"],"type":"object","properties":{"header":{"maxLength":50,"minLength":0,"type":"string","description":"Заголовок задачи, не более 50 символов","example":"Заголовок задачи"},"description":{"maxLength":1000,"minLength":0,"type":"string","description":"Описание задачи, не более 1000 символов","example":"Описание задачи"},"taskPriority":{"type":"string","description":"Приоритет задачи","example":"HIGH","enum":["HIGH","MEDIUM","LOW"]},"executorId":{"type":"integer","description":"ID исполнителя задачи","format":"int32","example":1}},"description":"Информация для создания задачи"},"ViewTaskDto":{"type":"object","properties":{"id":{"type":"integer","description":"ID задачи","format":"int32","example":1},"header":{"type":"string","description":"Заголовок задачи, не более 50 символов","example":"Заголовок задачи"},"description":{"type":"string","description":"Описание задачи, не более 1000 символов","example":"Описание задачи"},"taskStatus":{"type":"string","description":"Статус задачи","example":"IN_PROGRESS","enum":["CREATED","PENDING","IN_PROGRESS","COMPLETED","CANCELED"]},"taskPriority":{"type":"string","description":"Приоритет задачи","example":"HIGH","enum":["HIGH","MEDIUM","LOW"]},"author":{"$ref":"#/components/schemas/ViewUserDto"},"executor":{"$ref":"#/components/schemas/ViewUserDto"}},"description":"Информация о задаче"},"ViewUserDto":{"type":"object","properties":{"id":{"type":"integer","description":"ID пользователя","format":"int32","example":1},"name":{"type":"string","description":"Имя пользователя","example":"David"},"userPosition":{"type":"string","description":"Должность пользователя","example":"DEV_MIDDLE","enum":["DEV_LEAD","DEV_SENIOR","DEV_MIDDLE","DEV_JUNIOR"]},"role":{"type":"string","description":"Роль пользователя","example":"EXECUTOR","enum":["MANAGER","EXECUTOR"]}},"description":"Краткая информация о пользователе"},"CreateCommentDto":{"required":["taskId","text"],"type":"object","properties":{"text":{"maxLength":1000,"minLength":0,"type":"string","description":"Текст комментария","example":"Текст комментария =)"},"taskId":{"type":"integer","description":"ID комментатора","format":"int32","example":1}},"description":"Информация для создания комментария"},"ViewCommentDto":{"type":"object","properties":{"id":{"type":"integer","description":"ID комментария","format":"int32","example":1},"text":{"type":"string","description":"Текст комментария","example":"Текст комментария =)"},"author":{"$ref":"#/components/schemas/ViewUserDto"},"created":{"type":"string","description":"Дата и время создания комментария","format":"date-time"}},"description":"Информация о комментарии"},"UpdateTaskDto":{"type":"object","properties":{"header":{"maxLength":50,"minLength":0,"type":"string","description":"Заголовок задачи, не более 50 символов","example":"Заголовок задачи"},"description":{"maxLength":1000,"minLength":0,"type":"string","description":"Описание задачи, не более 1000 символов","example":"Описание задачи"},"taskStatus":{"type":"string","description":"Статус задачи","example":"IN_PROGRESS","enum":["CREATED","PENDING","IN_PROGRESS","COMPLETED","CANCELED"]},"taskPriority":{"type":"string","description":"Приоритет задачи","example":"LOW","enum":["HIGH","MEDIUM","LOW"]},"executorId":{"type":"integer","description":"ID исполнителя задачи","format":"int32","example":1}},"description":"Информация для обновления задачи"},"UpdateCommentDto":{"required":["text"],"type":"object","properties":{"text":{"maxLength":1000,"minLength":0,"type":"string","description":"Обновленный текст комментария","example":"Новый текст комментария"}},"description":"Обновленный текст комментария"}},"securitySchemes":{"Bearer Authentication":{"type":"http","description":"A JWT token is required to access this API","in":"header","scheme":"bearer","bearerFormat":"JWT"}}}}